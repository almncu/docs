## 常见问题解答

###（此常见问题解答将在适当的部分进行解释性的叙述。- JB）

* [(本FAQ将被分解为适当部分的解释性叙述。- JB)](#this-faq-will-be-farmed-into-explanatory-narratives-in-the-appropriate-sections---jb--)
* [问：那么我在哪里可以找到这个强大软件的开发者的心愿清单？](#q-so-where-do-i-find-wishlists-for-the-developers-of-this-awesome-software)
* [问：在sofia拨号字符串中使用%和@有什么区别？](#q-what-is-the-difference-between-using-a--and--in-a-sofia-dial-string)
* [问：在配置文件中使用${var}和$${var}有什么区别？](#q-what-is-the-difference-between-using-a-var-and-var-in-the-configuration-files)
* [问：在使用action应用“set”和“export”之间有什么区别？](#q-what-is-the-difference-between-using-action-application-set-and-export)
* [问：PBX和软交换有什么区别？这不只是语义问题吗？](#q-whats-the-difference-between-pbx-and-soft-switch-isnt-this-just-semantics)
* [问：FreeSWITCH™是用哪种语言编写的？](#q-what-language-is-freeswitch-written-in)
* [问：那你做的所有那些Asterisk开发呢？](#q-what-about-all-that-asterisk-development-you-did)
* [问：FreeSWITCH能做些什么？](#q-what-are-some-of-the-things-freeswitch-can-do)
* [问：什么？你说它能与Google Talk交谈？](#q-what-did-you-say-it-can-talk-to-google-talk)
* [问：有人在生产环境中运行FreeSWITCH吗？](#q-is-anyone-running-freeswitch-in-production)
* [问：它能支持多少并发呼叫？有没有基准测试？](#q-how-many-concurrent-calls-can-it-support-any-benchmarks)
* [问：你在这个项目上工作了多久？](#q-how-long-have-you-been-working-on-this-project)
* [问：你们何时会有第一个标记的发布版本？](#q-when-will-you-have-the-first-tagged-release)
* [问：什么是ClueCon？](#q-what-is-cluecon)
* [问：哪些电话可以与FreeSWITCH一起使用？](#q-which-phones-work-with-freeswitch)
* [问：FreeSWITCH必须以root身份运行吗？](#q-does-freeswitch-have-to-run-as-root)
* [获取帮助](#getting-help)  
* [问：是否有可用的文档？](#q-is-there-any-documentation-available)  
* [问：你们支持IRC吗？](#q-do-you-guys-support-irc)  
* [问：你们举办有关FreeSWITCH的电话会议吗？我可以在上面谈论FreeSWITCH吗？](#q-do-you-guys-run-a-teleconference-where-i-can-talk-about-freeswitch)  
* [问：是否有一个我可以在上面咨询有关FreeSWITCH的邮件列表？](#q-do-you-have-a-mailing-list-where-i-can-ask-questions-about-freeswitch)
* [故障排除](#troubleshooting)  
* [问：“Rejected by acl domains. Falling back to Digest auth”是不是有问题？](#q-is-it-bad-to-see-rejected-by-acl-domains-falling-back-to-digest-auth)  
* [问：有没有故障排除和报告错误的指南？我从哪里开始？](#q-are-there-any-guidelines-for-troubleshooting-and-reporting-bugs-where-do-i-start)  
* [问：当我用Snom电话呼叫FreeSWITCH时，在控制台上看到这个消息"a=crypto in RTP/AVP, refer to RFC 3711"应该如何解决？](#q-i-see-this-on-my-console-when-calling-freeswitch-with-a-snom-phone-acrypto-in-rtpavp-refer-to-rfc-3711httpstoolsietforghtmlrfc3711-how-can-i-fix-this)  
* [问：为什么FreeSWITCH在SDP中对某些编解码器不发送a=rtpmap行？我的设备期望这样做，否则无法工作！](#q-why-doesnt-freeswitch-send-artpmap-lines-for-some-codecs-in-the-sdp-my-device-expects-this-and-doesnt-work)  
* [问：我的FreeSWITCH安装对SIP流量没有响应，或者当我使用tcpdump时可以看到SIP流量，但仍然没有回应？](#q-my-freeswitch-install-isnt-responding-to-any-sip-traffic-or-i-see-sip-traffic-when-i-use-tcpdump-but-i-still-dont-get-a-response)  
* [问：我安装的FreeSWITCH提示SQL ERR\[no such table: <table_name>\]](#q-my-install-of-freeswitch-is-throwing-sql-errno-such-table-table_name)  
* [问

### Q: 那么我在哪里可以找到这个厉害软件的开发者的心愿单呢？

A: 您可以在这里找到每个开发者的心愿单：

Anthony Minessale (anthm) - <http://www.amazon.com/gp/registry/wishlist/1NQC79YV4RB83>  
Mike Jerris (MikeJ) - <http://www.amazon.com/gp/registry/wishlist/1ELF2W9FAIN2N>  
Brian West (bkw\_) - <http://www.amazon.com/gp/registry/wishlist/1BWDJUX5LYQE0>  
Ken Rice (SwK) - <http://amzn.com/w/38CG44Z1MZA87>

Travis Cross (tc) - <http://amzn.com/w/1BY8VBIYBK8BI>

William King (quentusrex) - <http://amzn.com/w/3CB0LGARUGVB3>

### Q: 在 sofia 拨号字符串中使用 % 和 @ 有什么区别？

这个很简单，您有几个选择。

如果该域是配置文件中的别名，则可以使用 **sofia/domain/user**。如果该域不是配置文件中的别名，则可以使用 **sofia/profile/user%domain**。如果您拨打的是一个不需要身份验证的远程 SIP URI，可以使用 **sofia/profile/remoteuser@remoteip**。

### Q: 在配置文件中使用 ${var} 和 $${var} 的区别是什么？

${var} 在遇到时会被扩展为其值，而 $${var} 则用作预处理器变量，并在加载或重新加载 XML 文件时进行扩展。有关更多信息，请参阅 conf 文件夹中的 vars.xml。

### Q: 在使用 action 应用程序 "set" 和 "export" 之间有什么区别？

"set" 是为当前通道设置通道变量，而默认情况下的 "export" 则为两个腿（腿 A 和腿 B）设置变量。您还可以使用 "export" 仅为腿 B 设置变量，方法是在变量前使用 "nolocal:"，如下例所示：

&lt;action application="export" data="nolocal:foo=bar"/>

### Q: PBX 和软交换有什么区别？这不只是一个术语上的区别吗？

一个PBX是一个机构，它允许私人公司拥有自己的小型电话公司，提供诸如语音信箱、分机和会议等服务。PBX的主要焦点是让多个电话彼此找到并进行通信。

软交换是一种软件应用程序，可以将两个网络之间的电话线连接起来，通常将呼叫从一个协议路由到另一个协议，或连接到诸如PBX这样的终结点。FreeSWITCH也有可能实现PBX的功能，但这并不是强制性的。可以将多个模块加载到FreeSWITCH中，使其的行为与一组PBX应用程序完全相同。相比于试图使单个单体化PBX表现为交换机，这样做更加简单，特别是当PBX应用程序的核心功能已经永久地集成在PBX应用程序的核心中时。

### 问：FreeSWITCH™是用什么语言编写的？

有几种语言，核心是用C语言编写的。大部分模块是用C语言编写的，但也有一些是用C++语言编写的。一些模块使您可以使用不同的语言编写应用程序，包括但不限于JavaScript/ECMAScript、Lua、Perl、Python、Ruby、Java和.NET。

### 问：那你的Asterisk开发呢？

它并不是白费的，我仍然使用这个软件，嘿，我甚至经常为人们提供咨询服务。我花了几年的时间为它做出了贡献，并为Asterisk开发了许多第三方模块，这些模块可以在我的[asterisk stuff](http://www.freeswitch.org/node/50)页面上找到。

FreeSWITCH只是我对未来电话通信的概念。

### 问：FreeSWITCH能做些什么？

FreeSWITCH具有实现SIP、SCCP、H.323（通过OPAL）、Skype、Jingle（Google Talk）、声卡（通过[mod\_portaudio](https://wiki.freeswitch.org/wiki/Mod%5Fportaudio "Mod portaudio")）和TDM卡（Sangoma或与Zaptel兼容的卡）的终端。您可以将其用作VoIP通信的客户端和服务器，从一个协议网关到另一个协议并执行用JavaScript、Perl、Lua或C#等多种语言编写的IVR脚本。它还有一个功能强大的事件引擎，可以通知您系统上发生的任何事情，以及一个XML-RPC接口，通过HTTP与核心交换数据。

有一个抽象层，可以从XML、外部HTTP请求、平面文件（INI格式）和目录查找（例如LDAP）中获取数据。拨号计划结合了XML和Perl兼容正则表达式的优势，可以根据来电详细信息的大多数条件路由呼叫。

### Q: 什么？你说它可以和Google Talk通话？

是的，在2006年三月，我开发了自己的XMPP电话信号库，能够与Google Talk通信。通过一个Jabber帐户，您可以同时接收来自Google Talk客户端的无数通话，并将这些通话网关到IVR或其他语音协议，如SIP或H.323。当FreeSWITCH出现在通话的两端时，您可以绕过NAT并发送扩展数据，例如主叫号码和被叫号码。您可以在此处找到有关如何通过FreeSWITCH进行Google Talk到SIP呼叫的教程：<http://www.alijawad.org/cms/index.php?option=com%5Fcontent&task=view&id=21&Itemid=2>

### Q: 有人在生产环境中使用FreeSWITCH吗？

有的。

### Q: 它支持多少并发通话？有任何基准测试吗？

这完全取决于您的应用程序。您需要使用您的应用程序进行负载测试，以了解您的限制。具体要求会有所不同。

请不要在邮件列表上提出这个问题，因为您将始终收到来自FreeSWITCH项目的相同官方回复：“我们只对FreeSWITCH部署进行基准测试并确认这些结果，因为每个部署都会得出不同的数字。有关此任务，项目提供商业支持。项目从经验中学到了承受这类问题的危险，并决定在免费公共论坛上不回答这类问题。”

### 问：您从事这个项目多长时间了？

实际上有趣的那部分代码的最初版本发布于2006年1月初。我在2005年10月初开始进行实际开发。

### 问：您何时发布第一个打过标签的版本？

第一个打过标签的版本1.0.0 在2008年5月26日星期一发布在网络上。从那时起，已经有更多的打过标签的版本发布。

### 问：什么是ClueCon？

ClueCon是芝加哥每年举办的一个电话开发者会议，各个流行VoIP项目的领导者和其他电话开发者聚集在一起，分享想法并举行信息性的演讲。这是一个为期三天的机会，白天沉浸在这个新兴技术中，晚上在芝加哥市中心度过！

### 问：哪些电话与FreeSWITCH兼容？

请查看此列表：Interop List

### 问：FreeSWITCH需要以root用户身份运行吗？

不需要。

## 获取帮助

### 问：是否有任何可用的文档？

是的。在[文档](https://wiki.freeswitch.org/wiki/Documentation "文档")页面提供了超过500页的文档资料。

### 问：你们支持IRC吗？

是的。自由交换志愿者组织包含各种程度的初学者和专家，他们在irc.freenode.net的#freeswitch频道聚集。你可以使用许多IRC聊天客户端进行连接，例如Windows的[mIRC](http://www.mirc.com/)，macOS的[Limechat](http://limechat.net/mac/)，Unix-like系统的[Irssi](http://www.irssi.org/)或[XChat](http://www.xchat.org/)，Mozilla浏览器的[ChatZilla](http://chatzilla.hacksrus.com/)，或任何其他标准的IRC程序。我们主要使用英语交流，但我们也提供了许多其他语言的自动翻译服务。

### 问：你们举办电话会议讨论FreeSWITCH吗？

是的！我们支持多种方式与你通话 - 所有方式都将连接到同一地点：

* SIP：[888@conference.freeswitch.org](mailto:888@conference.freeswitch.org)
* H.323：[888@conference.freeswitch.org](mailto:888@conference.freeswitch.org)
* Google Talk/Jingle：[freeswitch@gmail.com](mailto:freeswitch@gmail.com)
* Google Talk/Jingle：[888@jabber.asterlink.com](mailto:888@jabber.asterlink.com)
* IAX：guest@[conference.freeswitch.org/888](http://conference.freeswitch.org/888)

我们每周三1700 UTC都会进行一个[每周电话会议](https://wiki.freeswitch.org/wiki/Weekly%5FConference%5FCall "每周电话会议")。以前的会议已经录制下来，并可以在该页面找到。

在其他时间，电话会议频道通常不活跃，但在一天的任何时间都可以在[IRC](https://wiki.freeswitch.org/wiki/FreeSwitch%5FFAQ#Q:%5FDo%5Fyou%5Fguys%5Fsupport%5FIRC.3F "FreeSwitch FAQ")上找到许多志愿者。

### Q: 你们有邮件列表吗，我可以在那里提问关于FreeSWITCH的问题吗？

当然有。要注册，你可以访问[http://lists.freeswitch.org](http://lists.freeswitch.org/)。我们强烈推荐你阅读这篇很棒的文章，了解如何在邮件列表上提问[smart questions](http://www.catb.org/esr/faqs/smart-questions.html#intro)。

## 故障排除

### Q: 看到"Rejected by acl domains. Falling back to Digest auth" 这样的提示是不是有问题？

**不要惊慌！这是正常现象！** 这是一条信息提示，意味着FreeSWITCH无法在叫接入控制列表（ACL）中找到与远程IP地址匹配的项，因此它现在转而使用摘要认证。如果你想让FreeSWITCH根据远程机器的IP地址接纳它，请将其添加到conf/autoload_configs/acl.conf.xml文件中，或者如果这是已注册的分机，请在`user id=`行的末尾加上`cidr="w.x.y.z/ab"`属性。请注意，这可能会导致某些多行SIP电话出现问题。

### Q: 有没有故障排除和报告错误的指南？我应该从哪里开始？

从这个维基页面开始：[Reporting Bugs](https://wiki.freeswitch.org/wiki/Reporting%5FBugs "Reporting Bugs")，它会为你解答许多问题。

### Q: 我用Snom电话呼叫FreeSWITCH时，控制台上出现 "a=crypto in RTP/AVP, refer to [RFC 3711](https://tools.ietf.org/html/rfc3711)" 这段信息，我该如何修复？

你需要转到身份验证 -> RTP，并将RTP/SAVP设置为可选。这样就能解决这个问题。

### Q: 为什么FreeSWITCH在SDP中某些编解码器的地方不发送a=rtpmap行呢？我的设备希望这样，但却不能正常工作！

对于静态有效负荷类型，a=rtpmap行是可选的，因为编解码器已经定义了它的内容。它们只对动态有效负荷类型是必需的。

FreeSWITCH更倾向于省略静态Payload类型的a=rtpmap，因为这意味着SDP更小。这不仅使用更少的带宽，还避免了（但不能防止）SIP数据包的分段，其中编解码器列表足够长以超过MTU。

如果您的设备需要为静态Payload类型提供a=rtpmap行，则说明您的设备未正确支持SDP标准。然而，由于这些设备在市面上还是比较多的，可以配置FreeSWITCH发送这些行以与这些设备兼容，使用[verbose\_sdp](https://wiki.freeswitch.org/wiki/Variable%5Fverbose%5Fsdp "Variable verbose sdp") 变量。

### 问：我安装的FreeSWITCH不响应任何SIP流量，或者当我使用tcpdump时看到SIP流量，但我仍然没有得到响应？

这通常发生在启用了防火墙的情况下。当使用_tcpdump_时，您仍然会看到流量命中您的机器，但确保流量通过的最可靠方法是关闭iptables，即“service iptables stop”。

### 问：我安装的FreeSWITCH出现SQL ERR\[no such table: &lt;table_name>\]的错误

通常情况下会跟着一条"Auto Generating Table!"的提示信息。当FreeSWITCH找不到所需的数据库/表时，这是正常行为。只要在FreeSWITCH重新启动时不再出现这条消息，您可以忽略此错误。在加载之前未使用过的模块或进行升级时，也可能会出现此错误。

如果您不断地看到这些错误，并且同时使用了旧式/SQLite DSN和同名的ODBC DSN的混合模式，则有可能是遇到了[FS-5664](http://jira.freeswitch.org/browse/FS-5664)的问题。

### 问：显示通道、会议列表和其他控制台命令没有输出

您可能有一个旧的数据库架构副本，其中跟踪了该信息。

在Linux/Unix系统上执行以下操作：

```bash
# rm -rf /usr/local/freeswitch/db/*
```
然后重新启动FreeSWITCH，看看是否修复了该问题。

### 问：如果我的Win32 FreeSWITCH无法启动，我应该检查什么？

为了正常运行，您需要msvcr80d.dll，它可能已经存在于您的系统上。如果您没有这个DLL，建议尝试安装“Microsoft Visual C++ 2005 Redistributable Package”，比如：[x86链接](http://www.microsoft.com/downloads/details.aspx?FamilyID=32bc1bee-a3f9-4c13-9c99-220b62a191ee&DisplayLang=en)。

### 问：我如何调试SIP？

参考：[调试FreeSWITCH](https://wiki.freeswitch.org/wiki/Debugging%5FFreeswitch "Debugging Freeswitch") 和 [FreeSWITCH端点Sofia](https://wiki.freeswitch.org/wiki/Sofia-SIP "Sofia-SIP")

### 问：如何使用调试符号编译FreeSWITCH？

```bash
# export CFLAGS="-g -ggdb"
# export MOD_CFLAGS="-g -ggdb"
# ./configure
# make megaclean (如果需要清理所有lib)
# make (如果只想编译FreeSWITCH本身)
```

或者，您可以在根目录下运行devel-bootstrap.sh脚本。请注意，devel-bootstrap脚本将设置-O0（禁用优化）。这对于逐步执行代码很有用。

### 问：为什么会出现“Invalid Application &lt;name>”错误？

错误最常见的原因是您没有加载正确的模块。

例如：

```
2010-09-13 11:01:50.353264 [ERR] switch_core_session.c:1791 Invalid Application hash
```

如何解决：

修改conf/autoload\_configs/modules.conf.xml，并添加：

```xml
<load module="mod_hash"/>
```

### 问：mod_spidermonkey_odbc抛出以下错误：

::Error SQLConnect=-1 errno=0 [unixODBC][Driver Manager]找不到数据源名称，也没有指定默认驱动程序

确保ODBC驱动程序（odbc.ini）和数据源（odbcinst.ini）位于/usr/local/freeswitch/etc目录中。
（通常它们在/etc目录中 - 创建符号链接）。请参阅[unixODBC配置](https://wiki.freeswitch.org/wiki/Mod%5Fspidermonkey%5Fodbc#General%5FConfiguration "Mod spidermonkey odbc")。

### Q: 这个ICMP错误是什么意思？

由于某种原因，您的连接被拒绝。

如果您收到“端口不可达”错误，请正确设置有问题的设备上的STUN（即您的IP电话）。

首次安装时，请确保您的freeswitch服务器主机名在服务器上解析为IP地址。您需要在/etc/sysconfig/network文件中的HOSTNAME值中具有DNS条目或/etc/hosts条目匹配。

请参阅[连接被拒绝](http://www.iana.org/assignments/icmp-parameters/icmp-parameters.xhtml#icmp-parameters-codes-3)获取更多详细信息。

### Q: Ubuntu 64位（Gutsy/Intrepid）启动时出现段错误

与ncurses库有一个问题，解决方法如下：

# apt-get install ncurses-devel
# 在构建FreeSWITCH的目录中切换到libs/libedit目录，并运行以下命令：
# cd libs/libedit
# make clean
# sh configure.gnu
# make
# cd ../..
# make clean
# make install

### Q: 为什么FreeSWITCH保持自己的时间而不使用系统时间？

允许任何软件信任系统时间是非常危险的。如果时间突然在几小时或几年之内发生变化，那些依赖于系统时间计算持续时间等的操作可能会受到严重影响。夏令时等因素可能会破坏CDR等功能。

FS中的时钟是内置的单调时钟，并且保留了与实际时间的偏移量。如果您想在需要时让FS与系统时间同步，有一些命令可以执行此操作。使用命令fsctl sync\_clock

### 问：我升级了，我的ODBC DSN不再工作！

在v1.2.4中，ODBC DSN语法已更改。"[datasource:username:password](http://datasourceusernamepassword)" DSN仍然有效，但不包含用户名/密码的"datasource" DSN将无效。在DSN之前加上odbc://

请参阅v1.2.4 [发布说明](https://wiki.freeswitch.org/wiki/Release%5FNotes#odbc-dsn "发布说明")，或[DSN](https://wiki.freeswitch.org/wiki/DSN "DSN")页面。

## 作为服务运行

### 问：我如何在后台运行freeswitch？

只需使用选项 _\-nc_ 运行freeswitch

### 问：在后台运行FreeSWITCH时，有没有类似telnet的东西可用？

有。确保加载了[mod\_event\_socket](https://wiki.freeswitch.org/wiki/Mod%5Fevent%5Fsocket "Mod event socket")，然后运行FreeSWITCH二进制目录中的[fs\_cli](https://wiki.freeswitch.org/wiki/Fs%5Fcli "Fs cli")。

### 问：如何停止在后台运行的freeswitch守护程序？

# freeswitch -stop

或者，

fs_cli> shutdown

### 问：如何为我的freeswitch守护进程设置高优先级？

只需使用选项 _\-hp_ 运行freeswitch

您还可以使用以下选项：

 _-np_ – 普通（系统）默认优先级
 _-lp_ – 低优先级
 _-hp_ - 高优先级
 _-rp_ – 高实时优先级

  
### 问：如何安装为Win32服务？

从您安装FreeSWITCH的目录中运行：freeswitch -install

### 问：如何在同一台计算机上运行多个实例？

查看[高级配置指南](https://wiki.freeswitch.org/wiki/Advanced_configuration#Multiple%5FFreeSWITCH%5Finstances%5Fon%5Fone%5Fbox "高级配置")

## 硬件/操作系统兼容性

### 问：是否可以在Amazon Elastic Cloud上运行？

是的，请参见[Amazon EC2](https://wiki.freeswitch.org/wiki/Amazon%5FEC2 "Amazon EC2")。

### 问：是否可以在Xen上运行？

是的，一定可以。[Amazon EC2](https://wiki.freeswitch.org/wiki/Amazon%5FEC2 "Amazon EC2")使用Xen。

### 问：是否可以在没有MMU的设备上运行，比如Blackfin？

现在还不行，将来也可能不行。没有MMU无法运行流行的服务器操作系统，比如Linux。ucLinux在Blackfin上得到了很好的支持，但ucLinux是一个精简版的Linux，被设计成在没有MMU的限制下运行。

一些其他的语音通信软件已经被移植到基于Blackfin的设备上，比如IP04（网址为[http://www.rowetel.com](http://www.rowetel.com/)）。如果应用简单又干净，结果会非常令人满意。然而，用户必须注意不要运行会导致内存碎片化严重的任务，否则可能需要频繁重新启动。目前还没有针对这种限制设计的FreeSWITCH版本。因此，目前尚未进行到ucLinux平台的移植。

## 编译

### 问：我是否需要下载所有这些外部库？

不需要，`make install`会根据您选择要编译的模块来下载所需的库。

### 问：如何使用本地目录而不是`/usr/local/freeswitch`？

`./configure --prefix=/my/install/dir`

上述命令将导致所有后续的“make install”命令将FreeSWITCH安装到/my/install/dir/目录（而不添加“freeswitch”子目录）。如果您稍后重新运行configure而不使用--prefix参数，安装目录将恢复为/usr/local/freeswitch。

### 问：如何选择要构建的模块？

编辑源目录中的modules.conf文件，对不需要的模块前面加上#，对需要的模块删除前面的#（在Windows上，您可以使用常规的Visual Studio方法通过配置管理器更改依赖项）

### 问：如何使用Microsoft Visual C++ 2008/2010 Express Edition编译FreeSWITCH？

务必遵循Microsoft的安装说明。Visual C++页面可以在[这里](http://www.microsoft.com/express/vc/)找到。安装了VC++ 2008 Express之后，打开解决方案文件Freeswitch.2008.express.sln。如果您看到很多关于不支持文件夹的错误，则可能是打开了完整的MS Visual C++版本的解决方案文件Freeswitch.2008.sln。点击Build，Build Solution，并等待编译完成。可执行文件freeswitch.exe将位于debug文件夹中。请注意，早期的结果表明，也可以使用Visual C++ 2010 Express。

注意：不再支持Microsoft Visual C++ 2005。

### 问：我在CentOS（可能是其他发行版）上使用“/lib/cpp”进行健全性检查时遇到问题？

在CentOS 4.4上运行"./configure"时，会输出以下错误：“configure: error: C++ preprocessor "/lib/cpp" fails sanity check”。尝试运行"yum install gcc-c++ compat-gcc-32 compat-gcc-32-c++"来安装它。请检查依赖项并同意（如果您同意的话！）。

### 问：在执行“make megaclean”时出现错误

尝试按照以下顺序运行命令: "./bootstrap.sh"、"./configure"、"make megaclean"，最后是"make installall"

### Q: 我没有Microsoft Visual C++，Windows有二进制下载吗?

预编译的Windows二进制文件可供下载。请参阅节: [Precompiled Binaries](https://wiki.freeswitch.org/wiki/Installation%5Ffor%5FWindows#Precompiled%5FBinaries "Installation for Windows")

## SIP

### Q: 如何设置SIP客户端身份验证?

有关此信息，请参阅[Sofia-SIP](https://wiki.freeswitch.org/wiki/Sofia-SIP "Sofia-SIP")模块文档。

### Q: 如何设置[通话等候音乐](https://wiki.freeswitch.org/wiki/Music%5Fon%5FHold "Music on Hold")（MOH）？

在拨号计划XML中，通过查看[Sofia Configuration Files](https://wiki.freeswitch.org/wiki/Sofia%5FConfiguration%5FFiles "Sofia Configuration Files")中的hold-music选项来设置每个中继的设置，或者查看每个通道变量[hold\_music](https://wiki.freeswitch.org/wiki/Channel%5FVariables#hold%5Fmusic "Channel Variables")。

### Q: RTP不活动后，通道可以自动挂断吗?

是的，可以通过Sofia配置文件上的两个参数 rtp-timeout-sec 和 rtp-hold-timeout-sec 来打开此功能。

### Q: 如何在FreeSWITCH控制台中查看SIP注册信息?

要在内部配置文件中显示SIP注册信息:

freeswitch> sofia status profile internal reg

## PSTN

### Q: 可以使用模拟线路（FXS/FXO）与FreeSWITCH一起使用吗?

[FreeTDM](https://wiki.freeswitch.org/wiki/FreeTDM "FreeTDM")支持模拟卡。有关当前状态，请参阅[FreeTDM](https://wiki.freeswitch.org/wiki/FreeTDM "FreeTDM")。

### Q: 可以使用ISDN BRI/BRA线路（S0基本速率接口）与FreeSWITCH一起使用吗?

BRI通过FreeTDM可使用Sangoma ISDN模块（ftmod_sangoma_isdn）或通过libpri模块（ftmod_libpri）进行支持。

初始的BRI支持已添加到默认的ISDN模块（ftmod_isdn）中。支持TE（用户）和NT（网络）模式，包括NT模式下的拨号音和重叠接收。已通过zaptel + bristuff / DAHDI（ftmod_zt）和单端口HFC-S PCI卡进行了测试/开发。注意：ftmod_isdn ISDN栈不支持高级特性（转移、保持等）。

* 更多信息请参见[FreeTDM](https://wiki.freeswitch.org/wiki/FreeTDM "FreeTDM")。

###问：我能在PRI（E1/J1/T1）上使用FreeSWITCH吗？

[FreeTDM](https://wiki.freeswitch.org/wiki/FreeTDM "FreeTDM")支持PRI卡（以及模拟卡）。

###问：我能在MFC-R2（E1）上使用FreeSWITCH吗？

[FreeTDM](https://wiki.freeswitch.org/wiki/FreeTDM "FreeTDM")支持使用openr2库的MFC-R2信令。请参见[FreeTDM_OpenR2](https://wiki.freeswitch.org/wiki/FreeTDM%5FOpenR2 "FreeTDM OpenR2")。

##应用程序

###问：如何使用JavaScript（ECMAScript）拨号计划？

* 确保mod_spidermonkey已编译（src目录中的modules.conf）
* 确保在freeswitch.xml中启用了mod_spidermonkey
* 在拨号计划中通过路径调用'javascript'，作为参数  
   * 例如，`<action application="javascript" data="/tmp/test.js"/>`
* 访问[Javascript](https://wiki.freeswitch.org/wiki/Javascript "Javascript")文档，了解针对FreeSWITCH的JavaScript特定扩展。

###问：如何在没有控制台的情况下运行FreeSWITCH？

要无控制台运行： 

# freeswitch -nc

如果您希望在进程被后台化时访问美观的FreeSWITCH控制台（如上所示），您可以使用[fs_cli](https://wiki.freeswitch.org/wiki/Fs%5Fcli "Fs cli")。

# fs_cli

其他可用选项如下：

以高优先级模式运行;

# freeswitch -hp

用于Valgrind运行（用于调试）；

# freeswitch -vg

### Q: 如何将FreeSWITCH用作Win32服务？

要安装为Win32服务，请使用 "freeswitch -install"，要删除请使用 "freeswitch -uninstall"。目前，该服务安装在用户 "Network Service" 下，该用户可能没有足够的权限来实际运行FreeSWITCH。如果是这种情况，您可以通过双击服务，进入 "登录" 选项卡，并将其更改为更合适的用户，例如 "本地系统帐户" 或您创建的用户。您可以使用 "net start freeswitch" 命令行开始服务，并使用 "net stop freeswitch" 命令行停止服务。

如果由 "freeswitch -install" 创建的服务无法启动，请尝试以下替代方法。[点击查看更多信息](http://sw4me.com/wiki/Winserv)

下载 winserv，并将其移动到如下路径："C:\\Program Files\\winserv"。

然后在命令提示符下运行以下命令以安装服务："C:\\Program Files\\winserv\\winserv.exe" install FreeSWITCH "C:\\Program Files\\FreeSWITCH\\freeswitch.exe" -nc

### Q: 如何停止运行FreeSWITCH？

# freeswitch -stop

或者，

freeswitch> shutdown

## 命令行接口

### Q: 如何发起呼叫？

请查看[API命令：Originate](https://wiki.freeswitch.org/wiki/Mod%5Fcommands#originate "Mod commands") 。

有关Sofia-SIP URL语法的更多信息，请参阅：[FreeSWITCH终端点Sofia](https://wiki.freeswitch.org/wiki/Sofia-SIP "Sofia-SIP")

### Q: reloadxml 是否会重新加载所有XML文件？

reloadxml 将重新加载核心XML缓存，但并不意味着所有更改会生效。

* Dialplan和Directory都会完全刷新。
* 根据ENUM配置触发一个事件，导致ENUM重新加载。
* Sofia的配置文件不会刷新，但是你可以在Sofia中重新启动一个配置文件以使新的设置生效。
* 会议设置将在下次创建会议时生效，并且在会议运行时不会消失。

## 呼叫路由

### Q: 如何将终端点分配给具有不同分机集的上下文？

以下是几种可能的方法：

* 对于要路由到的每个上下文使用一个配置文件（每个配置文件需要具有不同的[ip:port](http://ipport)）
* 在注册数据中使用不同的域，然后使用自动上下文功能
* 将它们全部发送到一个共同的上下文，并执行_execute或转接到其他地方
* 将它们发送到一个IVR以决定它们去哪里
* 使用xml_curl根据数据列表中的身份提供不同的拨号计划

### Q: 如何为整个服务器使用单个域名？

如果您希望服务器对其发送的所有请求进行响应，并在单个域名下处理。可以在sip_profiles/internal.xml中查找force-register-domain，取消注释该行并将其设置为vars.xml中指定的域名。不太确定，但不能在directory.xml中设置唯一的域名，它必须与vars.xml中的域名匹配。

如果您希望将所有注册都列在/存储在同一个域上，则使用force-register-db-domain

&lt;param name="force-register-domain" value="域名"/>
&lt;param name="force-register-db-domain" value="域名"/>

## 配置FreeSWITCH

### Q: 是否有用于配置FreeSWITCH的图形界面（GUI）？

有几个正在积极维护的免费开源项目，还有一个被废弃的旧项目和几个商业选项。请查看[Freeswitch Gui](https://wiki.freeswitch.org/wiki/Freeswitch%5FGui "Freeswitch Gui")

### Q: XML很烂！我还有其他选择吗？

是和否。还有其他选择，但它们可能不是“更好”的选择。关于在FreeSWITCH配置中使用XML的讨论很多。请查看以下线程了解更多背景信息：

* [Anthony解释我们为什么选择了XML](http://www.freeswitch.org/node/123)（失效链接）  
参见[存档副本](https://web.archive.org/web/20130412200610/http://www.freeswitch.org/node/123) 在Internet Archive上或[XML并不完全糟糕](./27591425.mdx#-freeswitch--xml-its-not-all-bad-)
* [Anthony讨论创建mod_yaml以证明一个观点](http://lists.freeswitch.org/pipermail/freeswitch-users/2008-June/004021.html)  
[mod_yaml](../../Modules/mod_yaml_32178409.mdx#-freeswitch--mod_yaml-) 尚未被记录。

此外，请参阅[mod_dialplan_asterisk](https://wiki.freeswitch.org/wiki/Mod%5Fdialplan%5Fasterisk "Mod dialplan asterisk") 以获取有关如何使用extensions.conf INI样式配置来配置FreeSWITCH拨号计划的更多信息（注意：这比使用XML配置更不灵活，也不强大）。

以上所有说法都是建立在XML是您唯一持观望态度的原因的前提下。如果是这样的话，我们建议您使用默认配置尝试一下FreeSWITCH，看看它如何运行。您将会惊讶地发现，使用最少量的XML配置，您可以做很多事情。如果您在XML配置中进行适量的调试，您将对其功能感到惊奇。

注意：在不使用[Dialplan XML](https://wiki.freeswitch.org/wiki/Dialplan%5FXML "Dialplan XML")的情况下，编写你的呼叫逻辑的另一种方法是使用[mod\_dptools](https://wiki.freeswitch.org/wiki/Mod%5Fdptools "Mod dptools")以及/或[mod\_commands](https://wiki.freeswitch.org/wiki/Mod%5Fcommands "Mod commands")通过[mod\_event\_socket](https://wiki.freeswitch.org/wiki/Mod%5Fevent%5Fsocket "Mod event socket")或者[ESL](https://wiki.freeswitch.org/wiki/Event%5FSocket%5FLibrary "Event Socket Library")。通过这种方式，你可以避免使用Dialplan XML，并且可以使用编译或解释的编程语言完成所有呼叫逻辑。