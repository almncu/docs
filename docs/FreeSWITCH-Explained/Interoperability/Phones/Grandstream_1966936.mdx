# Grandstream

* 1 [Grandstream 产品](#grandstream-产品)
   * 1.1 [Grandstream BudgeTone 100](#grandstream-budgetone-100)
   * 1.2 [Grandstream BudgeTone 200](#grandstream-budgetone-100)
   * 1.3 [Grandstream GXP1405](#grandstream-gxp1405)
   * 1.4 [Grandstream GXP-2000](#grandstream-gxp-2000)
   * 1.5 [Grandstream GXP-2020](#grandstream-gxp-2000)
   * 1.6 [GrandStream GXV3140](#grandstream-gxv3140)
   * 1.7 [GrandStream GXV3140](#grandstream-gxv3140)
   * 1.8 [Grandstream GXW 40xx](#grandstream-gxw-40xx)
   * 1.9 [Grandstream GXW 410x](#grandstream-gxw-40xx)
   * 1.10 [Grandstream HandyTone-486](#grandstream-handytone-486)
   * 1.11 [Grandstream HandyTone 488](#grandstream-handytone-486)
   * 1.12 [Grandstream HandyTone 502](#grandstream-handytone-486)
   * 1.13 [Grandstream HandyTone 503](#grandstream-handytone-486)

## Grandstream 产品

### Grandstream BudgeTone 100

* **注册:** 可用
* **来电显示:** 可用
* **呼入/呼出:** 可用
* **呼叫等待:** 未测试
* **呼叫转接:** 未测试
* **呼叫保持:** 未测试

### Grandstream BudgeTone 200

编解码器选择有问题，以及 G722。它会根据偏好"协商"选择第7个编解码器。但它可以使用 PCM u-law 和 a-law，也可能适用于其他编解码器。

### Grandstream GXP1405

* **注册:** 可用
* **来电显示:** 可用
* **呼入/呼出:** 可用
* **呼叫等待:** 可用
* **呼叫转接:** 可用
* **呼叫保持:** 可用
* **MWI（消息等待指示器）:** 可用

### Grandstream GXP-2000

* **注册:** 工作正常
* **TCP 注册:** 未测试
* **呼叫者 ID:** 工作正常
* **呼入/呼出:** 工作正常
* **G722:** 工作正常
* **呼叫转移:** 工作正常 - 需要启用对称路由
* **呼叫保持:** 工作正常 - 需要启用对称路由
* **呼叫等待:** 未测试
* **呼叫保持:** 未测试
* **SIP 密码:** 古怪 - 不显示，如果无法注册，请恢复出厂设置并重新输入密码
* **烦人的默认设置:** 关闭对称路由、断开时启用扬声器、非美国 DST 字符串、重新启动后检查更新启用

### Grandstream GXP-2020

GXP-2020，SRTP 也可用。G722 有问题。TLS 不可用（适用于任何 Grandstream GXP 系列电话）

### GrandStream GXV3140

* **注册:** 工作正常
* **呼叫者 ID:** 工作正常
* **呼入/呼出:** 工作正常
* **呼叫等待:** 工作正常
* **呼叫转移:** 工作正常
* **呼叫保持:** 通过转移工作
* **MWI:** 工作正常
* **SRTP:** 工作正常
* **TLS:** 工作正常

### GrandStream GXV3140

* **注册:** 工作正常
* **呼叫者 ID:** 工作正常
* **呼入/呼出:** 工作正常
* **呼叫等待:** 工作正常
* **呼叫转移:** 工作正常
* **呼叫保持:** 未测试
* **MWI:** 未测试
* **SRTP:** 未测试
* **TLS:** 未测试
* **视频:** 工作正常

### Grandstream GXW 40xx

* GXW4024, GXW4008, GXW4004: 提供 FXO 端口  
   * 注册工作正常  
   * 呼入和呼出正常工作  
   * 在演示中通过拨号音进行呼叫转移（需要进行配置调整以启用）

### Grandstream GXW 410x

* GXW4104, GXW4108: 提供 FXO 端口  
   * 呼入和呼出正常工作

### Grandstream HandyTone-486

* **注册:** 工作正常
* **呼叫者 ID:** 工作正常
* **呼入/呼出:** 工作正常
* **呼叫等待:** 工作正常
* **呼叫转移:** 未测试
* **呼叫保持:** 未测试
* **MWI:** 工作正常

### Grandstream HandyTone 488

FXS方面似乎工作良好。我还没有测试过来电显示，也没有测试设备的FXO端口。

来自SIP呼叫的FXS端口（FreeSWITCH 1.0）的来电显示功能正常。同时，升级固件时遇到了一些问题 -- 重置配置（***99），问题解决了。我还没有测试过FXO端口。Jpeterson275 23:19，2008年12月2日（PST）

令人惊讶的是，在广域网（有线电缆调制解调器）上具有出色的ULaw音质。

同样令人惊讶的是其有效的NAT支持。

当连接到IVR模块时，似乎DTMF音调无法正常工作（但在转发到免费800号码服务时可以工作）。

### Grandstream HandyTone 502

2009年7月：固件版本：1.0.1.35

主页上写着“SIP通过TCP / TLS”。但实际上并不起作用。

总结:

* **注册:** 使用SIP通过UDP和TCP工作。
* **来电显示:** 未测试
* **呼入/呼出:** 正常工作
* **呼叫等待:** 未测试
* **呼叫转移:** 未测试
* **呼叫保持:** 未测试
* **SRTP** 未测试
* **TLS** 无法注册，详见下文
* **DTMF** 未测试
* **G.711传真** 正常工作
* **T.38传真** 正常工作

关于TLS：

实际上，有一些字段可以输入您的证书、私钥和私钥密码。但它无法通过TLS注册，只能通过UDP和TCP。我尝试了使用Pangolin，在那里TLS可以正常工作（导入FS的CA证书）。FreeSWITCH告诉我：

```xml
09:45:02.070075，从tls/[10.10.2.206]:2048接收到627字节的数据：
------------------------------------------------------------------------
REGISTER sip：domain.de：5061 SIP/2.0
Via：SIP/2.0/TLS 10.10.2.206:5062；branch=z9hG4bK1786789569;rport；alias
Route：<sip：domain.de：5061；lr>
From：<sip：1001@domain.de：5061>；tag=2027020172
To：<sip：1001@domain.de：5061>
Call-ID：824582011-5062-1@10.10.2.206
CSeq：2000 REGISTER
Contact：<sip：1001@10.10.2.206：5062；transport=tls>；reg-id=2；+sip.instance="<urn:uuid:00000000-0000-1000-8000-000B821E4582>"
Max-Forwards：70
User-Agent：Grandstream HT-502  V1.1C 1.0.1.35
Supported：path
Expires：3600
Allow：INVITE，ACK，OPTIONS，CANCEL，BYE，SUBSCRIBE，NOTIFY，INFO，REFER，UPDATE
Content-Length：0

------------------------------------------------------------------------
09:45:02.078878，发送627字节的数据到tls/[10.10.2.206]:2048：
------------------------------------------------------------------------
SIP/2.0 401 Unauthorized
Via：SIP/2.0/TLS 10.10.2.206:5062；branch=z9hG4bK1786789569;rport=2048；alias
From：<sip：1001@domain.de：5061>；tag=2027020172
To：<sip：1001@domain.de：5061>；tag=gD6H4BF5v4rXN
Call-ID：824582011-5062-1@10.10.2.206
CSeq：2000 REGISTER
User-Agent：FreeSWITCH-mod_sofia/1.0.3-exported
Allow：INVITE，ACK，BYE，CANCEL，OPTIONS，PRACK，MESSAGE，SUBSCRIBE，NOTIFY，REFER，UPDATE，REGISTER，INFO，PUBLISH
Supported：timer，precondition，path，replaces
WWW-Authenticate：Digest realm="domain.de"，nonce="a8a5dca0-7836-11de-b5f7-7f0e22d79464"，algorithm=MD5，qop="auth"
Content-Length：0
```

### Grandstream HandyTone 503

2009年6月：该设备应该支持TLS + SRTP - 目前已知唯一支持它的ATA设备。

简介：

* **注册:** FXS可以使用UDP、TCP上的SIP进行通信。使用TLS的机会仅有2%。
* **来电显示:** FXS可以使用UDP上的SIP进行通信。
* **呼入/呼出:** FXS可以使用UDP上的SIP进行通信（有时会掉线-见下文）。无法使用TCP或TLS。
* **等待呼叫:** 未测试。
* **转接呼叫:** 未测试。
* **挂起呼叫:** 未测试。
* **SRTP:** FXS可以正常使用。
* **TLS:** FXS的注册成功率仅有2%（在未更改设置的情况下），但无法进行呼入/呼出。
* **DTMF:** FXS可以与FS IVR模块正常使用。

细节：

正常工作的部分：

FXS通过UDP、RTP和SRTP进行通信，与IVR一起使用DTMF也能正常运行（在设备中将DTMF设置为RFC、INFO以及音频中） 。来电显示也能正常工作。默认的编解码顺序下音频效果非常清晰。

在NAT后面的设备通过STUN可以正常与FS进行通话（FS本身也位于NAT之后，支持UPnP并使用FS的自动NAT功能）。

无法正常工作的部分：

FXS通过TCP或TLS进行通信 - 注册可以成功。然而其他任何操作都无法进行 - 无法通过TCP或TLS进行呼入/呼出。而采用同样的设置，eyebeam和snom是可以正常工作的，因此问题不在于FS。

由于HT 503的问题（而非FS），有时呼叫会中途断开。对于有效的呼叫和呼叫ID，HT 503会返回"SIP/2.0 481 Call Leg/Transaction Does Not Exist"。

请在维基中更新任何关于TCP/TLS和呼叫中断的已知结果/修复信息。同时请包含对FXO的结果。

2011年1月 - 要正常工作，需要最新的HT503固件更新。FXS正常工作，FXO正常工作，但默认情况下注册为扩展而不是网关。HT503 FXO默认设置需要将"Preferred DTMF method"设置为"RFC2833"以进行连接。此外，有两种方法可以让FXO发送呼叫：第一种（不推荐）需要一个拨号计划调用fxo扩展获取拨号音，然后拨号计划需要拨打号码。可以通过在拨号计划中使用以下行来使其工作。

```xml
      <action application="queue_dtmf" data="W$1@100"/>
      <action application="bridge" data="user/1003"/>
      <action application="answer"/>
```

更好的方法是创建一个FXO的网关，但不请求注册（从未能成功注册），使用5062端口的示例- 

```xml
   <gateway name="ht503-1">
     <param name="realm" value="192.168.0.82:5062"/>
     <param name="proxy" value="192.168.0.82:5062"/>
     <param name="expire-seconds" value="800"/>
     <param name="register" value="false"/>
     <param name="retry-seconds" value="60"/>
     <param name="context" value="public"/>
   </gateway>

```

然后，当您进行呼叫时，您可以创建一个类似以下的拨号计划，将本地呼叫发送到第一个回答的HT503。

```xml
<extension name="本地7位数电话" >
  <condition field="destination_number" expression="^(\d{7})$">
      <action application="set" data="effective_caller_id_name=${outbound_caller_id_name}"/>
      <action application="set" data="effective_caller_id_number=${outbound_caller_id_number}"/>
      <action application="set" data="hangup_after_bridge=true"/>
      <action application="bridge" data="sofia/gateway/ht503-2/$1@192.168.0.85:5062"/>
      <action application="bridge" data="sofia/gateway/ht503-1/$1@192.168.0.82:5062"/>
  </condition>
</extension>
```
**用于扩音器/广播器分页** HT503可用作传统PBX放大器的网关，前提是放大器可以连接到CO或FX0端口（能够为tip和ring提供线路或电池电源），如Valcom V-200A。

1. 配置HT503注册的用户。
2. 配置HT503
   1. SIP服务器和登录信息。
   2. 拨号音等待（P3303）= 否。
   3. 阶段方式（P3304）= 1。
   4. PSTN无条件呼叫转移（P796）= #。
3. 如果您的放大器有RJ-11端口，请将HT503上的“线路”端口与放大器上的RJ-11端口连接。如果没有，请剪断一个RJ-11电缆的末端，并暴露出足够的红色（tip）和绿色（ring）导线以连接到放大器的tip和ring输入端口。
4. 确保放大器上的线路或电池电源“打开”。
5. 连接扬声器。
6. 为所有设备供电。
7. 创建一个拨号计划、会议等条目，将呼叫连接到您定义的设备。
8. 您的声音应该传到扬声器上。

查看[对讲](./Cisco/Intercom_1966939.mdx#goal)页面获取拨号计划的想法。