# Khomp/设置 

 

点击此处展开目录

* 1 [通道](#channels)
* 2 [组](#-groups)
* 3 [呼叫次数](#cadences)
* 4 [FXS分支](#fxs-branches)
* 5 [FXS热线](#fxs-hotlines)
* 6 [FXS选项](#fxs-options)

## 通道

定义Khomp所有通道的通用设置:

```xml
语法: <param name="..." value="..."/>
```

* **accountcode**: 设置终端的默认账户代码。此选项可以是任意字母数字字符串；
* **dialplan**: 使用的拨号计划模块的名称。
* **auto-fax-adjustment**: 启用（"yes"）或禁用（"no"）终端自动调整信道（禁用回声抵消器和抑制DTMF）的功能来检测传真（本地选项）；
* **auto-gain-control**: 启用（"yes"）或禁用（"no"）终端自动增益控制（AGC）功能（本地选项）；
* **context-digital**: 数字板的进呼叫连接所用的上下文（默认为"khomp-DD-LL"，其中"DD"将在连接时被设备号替换，"LL"将被链路号替换，"CCC"被通道号替换，"SSSS"被设备序列号替换）；
* **context-fxo**: FXO卡的进呼叫连接所用的上下文（默认为"khomp-CC-DD"，其中"DD"将在连接时被设备号替换，"CC"将被通道号替换，"SSSS"被设备序列号替换）；
* **context-fxs**: FXS卡的进呼叫连接所用的上下文（默认为"khomp-CC-DD"，其中"DD"将在连接时被设备号替换，"CC"将被通道号替换，"SSSS"被设备序列号替换）；
* **context-gsm-call**（或 **context-gsm**）: GSM板的入口上下文（默认为"khomp-CC-DD"，其中"DD"将在连接时被设备号替换，"CC"将被通道号替换，"SSSS"被设备序列号替换）；
* **context-gsm-sms**: SMS的进呼叫所用上下文（默认为"khomp-sms-CC-DD"，其中"DD"将被设备号替换，"CC"将被通道号替换，"SSSS"被设备的序列号替换）；
* **context-pr**: KPR板的进呼叫连接所用的上下文（默认为"khomp-CC-DD"，其中"DD"将在连接时被设备号替换，"CC"将被通道号替换）；
* **delay-ringback-co**: 设置在终端Khomp收到来自信令的回铃指示而通道没有发送音频的情况下，启用呼叫控制音（回铃音）的延迟时间（本地选项）；
* **delay-ringback-pbx**: 设置在终端Khomp收到回铃指示且音频没有音调（静音）的情况下，启用呼叫控制音（回铃音）的延迟时间（本地选项）；
* **disconnect-delay**: 设置断开事件的处理时间（以毫秒为单位），忽略其他设备执行双重服务以摧毁收回通话的情况（本地选项）；
* **drop-collect-call**: 启用/禁用放弃收回通话的动作。如果启用，所有收回通话将被放弃，不考虑KDropCollectCall的设置（默认值为"no"）；
* **echo-canceller**（之前为 'echocanceller'）: 启用（"yes"）或禁用（"no"）终端自动消除回声（本地选项）；
* **flash-to-digits**: 定义在FXS通道上检测到FLASH时要发送的数字；
* **fxo-send-pre-audio**: 当启用（"yes"）时，在呼出通话连接KFXO板之前释放音频通道（默认值为"yes"）；
* **fxs-digit-timeout**: 定义FXS板分机之间的数字之间的超时时间，以秒为单位；
* **fxs-global-orig**: 未在**\[fxs-branches\]**部分列出的FXS卡的顺序分配起始号码（编号按照板号和物理通道号的升序排列）（默认为"0"）；
* **fxs-co-dialtone**: 用逗号分隔的数字序列，在FXS分机上触发连续音（中央局）（例如："0,99"表示当拨号"0"或"99"时，用户将听到持续拨号音）（默认为空）；
* **fxs-bina**: 当启用（"yes"）时，拨打FXS线路的电话将使用BINA DTMF信令发送源电话识别的数字（默认值为"no"）（本地选项）；
* **ignore-letter-dtmfs**: 定义通道是否应忽略板发现的一些不常见的DTMF数字（A、B、C和D）。但是，如果需要通过板传递这些数字，可能需要将此选项设置为'no'（默认值为"yes"）；
* **input-volume**: 设置传入音频的音量增益（从板上输入），范围为-10至+10（本地选项）；
* **kommuter-activation**: 设置是否通过通道自动执行在系统中找到的kommuter设备（"auto"），还是由用户通过命令"khomp kommuter on/off"手动执行（"manual"）；
* **kommuter-timeout**: 设置kommuter设备初始化的超时时间（以秒为单位）。如果达到此超时时间而未接收到通道的通知，设备将切换回"off"状态。最小值为"0"，表示链路将始终保持开启状态，最大值为"255"；
* **language**: 设置Khomp板呼叫的语言；
* **log-to-console**: 设置日志消息是否打印到控制台；
* **log-to-disk**（之前为"log"）: 设置日志消息是否保存到磁盘；
* **out-of-band-DTMF**（之前为**dtmfsuppression**）: 启用（"yes"）或禁用（"no"）去除并发送这些带外DTMF信号（本地选项）；
* **output-volume**: 设置呼出音频的音量（范围从-10到+10）；
* **pulse-forwarding**（之前为 'pulsedetection'）: 启用（"yes"）或禁用（"no"）脉冲检测并将其转换为DTMF信号（本地选项）；
* **r2-preconnect-wait**（之前为 'r2preconnectwait'）: 设置发送R2/MFC协议的振铃信号的超时时间，以开始发送音频静音。仅在"r2-strict-Behavior"设置为"no"时使用（本地选项）；
* **r2-strict-Behaviour**: 启用（"yes"）或禁用（"no"）R2/MFC信令的行为与标准设置一致。默认为"no"，如果需要接收/发送精确信令协议数据（例如条件B），可以将其更改为"yes"（本地选项）；
* **suppression-delay**（之前为 **suppressiondelay**）: 启用（"yes"）或禁用（"no"）抑制DTMF所需的延迟。如果禁用（"no"），也将禁用DTMF的抑制功能（本地选项）；
* **trace**: 设置调试选项。除非绝对必要，否则不应在生产中使用；
* **user-transfer-digits**: 定义启动FreeSWITCH®与另一个PBX之间传输的DTMF数字序列（使用用户信令，如QSig或FXO FLASH）。

## &lt;组>

定义要在通道分配中使用的组。

在这种情况下，选项用于定义用于_字符串通道分配_的名称。格式遵循标准的**&lt;组名> = &lt;分配字符串>**，其中**分配字符串**是在桥接应用程序中使用的相同字符串，而**组名**是用户选择的任意名称。

例如，要将组pstn定义为板卡0的通道0和5，可以使用以下行：

```xml
<param name="pstn" value="b0c0 + b0c5"/>
```

另外，_桥接应用程序_可以使用此组，如**&lt;action application="bridge" data="Khomp/Gpstn/..."/>**。

您可以将特定输入上下文与通道组关联起来，只需在分配后面以':'分隔指定上下文字符串的名称。

例如，要将相同的组**pstn**定义为卡0上的通道0到20，并将接收上下文定义为此组中通道的**from-pstn**，可以使用以下行：

```xml
<param name="pstn" value="b0c0-20:from-pstn"/>
```

此组将以与之前相同的方式在_桥接应用程序_中使用，并且所有从这些通道传入的呼叫将在上下文**from-pstn**中处理。

## &lt;节奏>

定义终端节奏的设置。

在这种情况下，选项是节奏的名称，后面跟有一个或两个数字对 - 定义要在节奏中使用的音调和静音范围。有关详细信息，请参阅配置文件中的示例。

## &lt;fxs-分支>

定义板卡KFXS的源号码。

在这种情况下，选项是分支前缀和板卡的序列号的序列，它们定义了源地址的基本号码和板卡的数值顺序。选项的格式为：

```xml
<param name="prefixo" value="serial1, serial2, ...."/>
```

例如，如果有两个序列号分别为 **K0374** 和 **K2352** 的 **KFXS-300 SPX** 板需要进行顺序编号，从200开始计数，可以这样写：

```xml
<param name="200" value="374, 2352"/>
```

这将把板卡 '_K0374_' 的第一个分支定义为200号，第二个分支定义为201号，以此类推。板卡 K2352 的第一个分支将被编号为230（因为 K0374 有30个信道），第二个将被编号为231，以此类推，直到最后一个信道，编号为259。

更多细节，请参考配置文件中的其他示例。

## &lt;fxs-hotlines>

设置基于 KFXS 板的热线号码

在这种情况下，选项是分支序列和目标号码序列，用于定义将作为“热线”处理以及摘机时应呼叫的号码。例如：

```xml
<param name="100" value="1234"/>
<param name="200" value="4321"/>
```

在第一行中，编号为100的分支在摘机时呼叫分机号1234，而在第二行中，编号为200的分支在摘机时呼叫号码4321。

## &lt;fxs-options>

允许您为FXS分机设置特定设置。

在这种情况下，设置是分机号码（基于 **&lt;fxs-branches>** 中定义的号码）以及选项和它们的值。

* context（上下文）;
* input-volume（输入音量）;
* output-volume（输出音量）;
* calleridnum（呼叫方号码）;
* calleridname（呼叫方名称）;
* language（语言）;
* accountcode（账号代码）;
* flash-to-digits（闪断码）。

每个选项与其他选项之间通过竖线 "|" 或斜线 "/" 分隔，并在冒号 ":" 后面进行定义。示例：

```xml
<param name="200" value="input-volume:1|context:master-branch" />
```

有关语法和示例的更多信息，请参考配置文件。