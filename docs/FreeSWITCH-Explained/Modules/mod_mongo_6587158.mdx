# mod_mongo 

 

## 关于

MongoDB的API

点击这里展开目录

* 1 [API](#api)
* 2 [配置文件 mongo.conf.xml](#configuration-file-mongoconfxml)
* 3 [编译 mod\_mongo](#compile-mod_mongo)

## API

mod\_mongo 提供了2个API：

* mongo\_find\_one
* mongo\_mapreduce

## 配置文件 mongo.conf.xml

```xml
<configuration name="mongo.conf">
  <settings>
    <!-- 
      connection-string提供了与MongoDB建立连接的不同方式
      mongodb://[用户名:密码@]主机1[:端口1][,主机2[:端口2],...[,主机N[:端口N]]][/[数据库][?选项]]
    -->
    <param name="connection-string" value="mongodb://127.0.0.1:27017/?connectTimeoutMS=5000"/>
<!--
    <param name="map" value="function() { emit(this.a, 1); }"/>
    <param name="reduce" value="function(key, values) { return Array.sum(values); }"/>
    <param name="finalize" value="function(key, value) { return value;}"/>
-->
  </settings>
</configuration>
```

## 编译 mod_mongo

编译mod\_mongo需要scons和boost库：

```xml
apt-get install scon
apt-get install libboost-all-dev
```

目前（2013年2月），构建过程存在一些问题

在执行make之前，请运行以下命令（在Debian 6.0.3 64位系统上测试通过）：

```xml
export CFLAGS=
export CXXFLAGS=
export LDFLAGS='-lboost_thread -lboost_filesystem-mt -lboost_system-mt'
```

然后执行make