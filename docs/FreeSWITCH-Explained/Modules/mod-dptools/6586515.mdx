# mod_dptools: presence（模块：存在）

## 关于

发送PRESENCE_IN（进入）或PRESENCE_OUT（退出）类型的事件。目前，与sofia一起使用时，该函数没有很大的用处。这不会影响与BLF一起使用的挂钩状态的存在，但会发送表达用户挂钩状态的事件。

## 用法

```xml
presence <user> <rpid> <message> 
```

可以从XML拨号计划中**内联运行**（[inline](https://wiki.freeswitch.org/wiki/Dialplan%5FXML#Inline%5FActions "Dialplan XML")）此应用程序。

## 示例

```xml
 presence in|1000@xxx.xxx.xxx.xxx|dnd|'请勿打扰。'
```

```xml
 presence out|1000@xxx.xxx.xxx.xxx|unavailable|'现在离开来喝一杯热咖啡。'
```

## API

还可以将其用作API命令

```xml
 presence,[in|out] <user> <rpid> <message>
 presence in 1000@192.168.0.48 unknown dnd
```

您将获得以下事件

```xml
   Event-Name: PRESENCE_IN（进入）
   Core-UUID: 3a66caec-e488-4aed-8bc6-634bcc7cc4fe
   FreeSWITCH-Hostname: seven.local
   FreeSWITCH-Switchname: seven.local
   FreeSWITCH-IPv4: 192.168.0.48
   FreeSWITCH-IPv6: ::1
   Event-Date-Local: 2011-11-17 13:18:35
   Event-Date-GMT: Thu, 17 Nov 2011 05:18:35 GMT
   Event-Date-Timestamp: 1321507115845012
   Event-Calling-File: mod_dptools.c
   Event-Calling-Function: presence_api_function
   Event-Calling-Line-Number: 1550
   proto: dp
   login: /Users/seven/workspace/freeswitch/fs-0905/src/mod/applications/mod_dptools/mod_dptools.c
   from: 1000@192.168.0.48
   rpid: unknown
   status: dnd
   event_type: presence（存在）
   alt_event_type: dialog（对话）
   event_count: 0
```