# mod_opus

## 关于

在Freeswitch中实现的Opus编解码器。

使用来自FreeSWITCH存储库的Opus库，Debian存储库的版本过旧，无法与新版本的FS一起使用。请按照[FS 1.6视频安装页面](../Installation/Linux/Deprecated-Installation-Instructions/Debian-8-Jessie/FreeSWITCH-1.6-Video_7144556.mdx#1x1)上的说明添加存储库。

## 配置

配置文件位于autoload\_configs/opus.conf.xml。

```xml
<param name="asymmetric-sample-rates" value="1"/>
```

启用采样率协商。如果设置了该参数，FS将使用来自传入报文的maxplaybackrate和sprop-maxcapturerate，并根据RFC 7587对编码器进行配置。

如果一个实体收到了fmtp: maxplaybackrate=R1，sprop-maxcapturerate=R2，并发送了一个带有maxplaybackrate=R3，sprop-maxcapturerate=R4的fmtp，则应该以采样率min(R1, R4)启动编码器，并以采样率min(R3, R2)启动解码器。

_请注意，直到v1.6.11，此设置也会影响初始化编码器时要使用的比特率决策。请参阅下面的“negotiate-bitrate”。_

当设置为0时，FS将忽略来自报文的maxplaybackrate和sprop-maxcapturerate。

这不是一个FTMP参数。

```xml
<param name="use-vbr" value="1"/>

```

启用可变比特率。在Freeswitch中，默认情况下禁用Opus VBR（自FS 1.6.2之后）。

这是一个FMTP参数: <https://tools.ietf.org/html/rfc7587#page-11> (cbr)

```xml
<param name="use-dtx" value="0"/>
```

禁用DTX。在Freeswitch中，默认情况下启用DTX（自FS 1.6.2之后）。

这是一个FMTP参数: <https://tools.ietf.org/html/rfc7587#page-11> (usedtx)

```xml
<param name="complexity" value="10"/>

```

配置编码器的计算复杂度。

支持的范围是0-10（含）,其中10表示最高复杂度。

这不是FMTP参数。

```xml
<param name="maxaveragebitrate" value="0"/>

```

maxaveragebitrate：最大平均编解码器比特率（取值范围：6000到510000 bps），0不考虑且默认推荐。

* 这将设置本地编码器的比特率，并通过SDP中的特定"FMTP"属性指示远程编码器。

示例：如果您从SDP收到"maxaveragebitrate=20000"，并且在此配置中设置"maxaveragebitrate=24000"，

则最低值将在此情况下生效，即将"20000"设置到编码器，并将相应的fmtp属性设置为​​指示远程编码器执行相同操作。

关于maxaveragebitrate FMTP参数： <https://tools.ietf.org/html/rfc7587#page-10>

```xml
<param name="maxplaybackrate" value="0"/>

```

maxplaybackrate：编解码器的最大内部频率（取值范围：8000、48000 Hz），默认为48000 Hz。

* 这将设置本地编码器的采样率，并通过SDP中的特定"FMTP"属性指示远程编码器。

关于maxplaybackrate FMTP参数： <https://tools.ietf.org/html/rfc7587#page-9>

```xml
<param name="sprop-maxcapturerate" value="0"/>
```

sprop-maxcapturerate：我们发送的编码流的采样率，以告诉远程方。此参数是可选的，可以是任何Opus速率：8000、12000、16000、24000或48000 Hz。

关于sprop-maxcapturerate FMTP参数： <https://tools.ietf.org/html/rfc7587#page-9>

```xml
<param name="packet-loss-percent" value="15"/>
```

传递给Opus编码器的初始丢包百分比，用于前向纠错（FEC）。

这不是FMTP参数。

```xml
<param name="keep-fec-enabled" value="1"/>
```

此选项将通过略微调整比特率，保持编码器上的前向错误纠正（FEC）功能启用，因为在特定丢包百分比和比特率下，Opus编码器会关闭FEC。这是Freeswitch的特定功能。

关于Opus编码时的FEC更多信息: <https://tools.ietf.org/html/rfc7587#page-6>

这不是一个FMTP参数。

```xml
<param name="use-jb-lookahead" value="1"/> 
```

此选项将启用FEC解码。当启用此选项时，如果当前包丢失，Opus解码器将在Jitter缓冲区中查找下一个包，并从中解码FEC，以对抗包丢失。必须启用Jitter缓冲区。

关于Opus解码时的FEC更多信息: <https://tools.ietf.org/html/rfc7587#page-6>

这不是一个FMTP参数。

```xml
<param name="advertise-useinbandfec" value="1"/>
```

此选项将在发送的FMTP中添加useinbandfec=1。使用此选项，让对方知道可以发送带有FEC的包。这是一个FMTP参数: <https://tools.ietf.org/html/rfc7587#page-11> 。默认应该启用，但在某些情况下，可能需要关闭此选项。

```xml
<param name="adjust-bitrate" value="1"/>
```

当设置为1时，此选项允许RTP估计器根据接收到的RTCP信息检测到的丢包情况提供比特率是否应动态增加或减少的指示。

这是一个FreeSWITCH的特定功能（从v1.6.11开始可用）。

这不是一个FMTP参数。

```xml
<param name="bitrate-negotiation" value="1"/>
```

当设置为1时，将告诉FreeSWITCH在决定如何初始化Opus编码器时评估远程方的maxaveragebitrate。

这是一个FreeSWITCH的特定功能（从v1.6.12开始可用）。

这不是一个FMTP参数。

更多信息：

FreeSWITCH和Opus音频编解码器

### 评论：

| [其他可选参数配置于opus.conf.xml中（截至d18c964ba703df54efc56a313ff605cc4c9a5c98）：**sprop-maxcapturerate**：（整型）告诉远程接收器输入采样率的最大值（值：8000、12000、16000、24000、48000 Hz），0 不予考虑。 例如：&lt;param name="sprop-maxcapturerate" value="8000"/>。**asymmetric-sample-rates**（布尔型）例如：&lt;param name="asymmetric-sample-rates" value="1"/>。功能“**asymmetric-sample-rates**”实现了文档<https://tools.ietf.org/html/rfc7587>中以下解释的功能：如果一个实体接收到 fmtp: maxplaybackrate=R1，sprop-maxcapturerate=R2 并且发送包含如下的 Fmtp：maxplaybackrate=R3，sprop-maxcapturerate=R4，则编码器应该以 min(R1, R4) 的采样率开始，解码器以 min(R3, R2)的采样率开始。*/ **keep-fec-enabled**（布尔型）例如：&lt;param name="keep-fec-enabled" value="1"/>。功能“**keep-fec-enabled**”试图在Opus编码器上启用FEC，具体取决于通过RTCP 接收到的丢包情况。它会稍微增加比特率，仅为FEC提供更多的空间。适用于特定的丢包模式（许多小间隙）。**packet-loss-percent**（整型）例如：&lt;param name="packet-loss-percent" value="40"/>。以此值启动编码器，在编码语音负载中考虑FEC信息。![](/images/icons/contenttypes/comment_16.png) 作者 dragos\_oancea Jul 13, 2015 19:40发布                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## Translation

- [to_be_replace1]: 如何设计一个好的网页界面
- [to_be_replace2]: 在设计一个网页界面时，有几个重要的因素需要考虑。首先，要确保网页的布局清晰简洁。用户应该能够轻松地找到所需的信息，并且界面应该易于使用。其次，要注意页面的可视性。颜色和字体应该能够引起用户的注意，但不至于让他们感到不舒服。此外，要确保界面的导航和交互元素易于被理解和使用。最后，要进行用户测试以验证设计的有效性。通过考虑这些因素，设计师可以创建一个好的网页界面，提供良好的用户体验。

- [to_be_replace3]: 网站的导航栏应该放置在页面的顶部或侧边，并且应该明确显示每个页面的链接。此外，还可以考虑使用面包屑导航，以帮助用户了解他们所处的位置。在设计网站的导航时，要尽量少使用子菜单或下拉菜单，以免让用户感到困惑。 

- [to_be_replace4]: 在设计网页界面时，要注意页面的可读性。文字应该清晰易读，并且与背景色形成明显的对比。此外，要避免使用过小的字号和过长的段落。另外，还可以使用标题、段落和列表来帮助组织和呈现内容。 

- [to_be_replace5]: 图片和图标是网页界面设计的重要元素。它们可以增加视觉吸引力，并帮助传递信息。要确保图片和图标的质量和分辨率良好，并且与页面的整体风格一致。此外，要注意图片和图标的大小和位置，以确保它们不会影响页面的加载速度和导航。

- [to_be_replace6]: 最后，进行用户测试是设计好网页界面的关键部分。通过与真实用户进行交互，可以获得有关用户体验的有价值的反馈。这有助于发现并解决界面上的问题，并改进设计。记住，一个好的网页界面不仅要美观，还要能够提供高效的功能。

## 结论
设计一个好的网页界面需要考虑布局、可视性、导航、可读性和图片等因素。通过合理考虑这些因素，并进行用户测试，可以打造一个功能齐全且令人愉悦的网页界面。