＃mod_speex 

 

＃＃ 关于

Speex 在合理的 CPU 和带宽要求下提供了相当不错的音频质量。

已过时

[speex] (http://www.speex.org/) 编解码器已被 [opus-codec] (http://www.opus-codec.org/) [RFC 6716] (http://tools.ietf.org/html/rfc6716) 取代。

单击此处展开目录

* 1 [编解码器协商]（＃codec-negotiation）
* 2 [配置]（＃configuration ）
   * 2.1 [示例默认配置]（＃example-default-configuration-）
* 3 [另请参见]（＃see-also）

## 编解码器协商

mod_speex 对 [RFC 5574]（https://tools.ietf.org/html/rfc5574） fmtp 编解码器协商提供了一些支持。如果 Speex 的 fmtp 在提供或响应中定义，则 FreeSWITCH 将配置编解码器以使用首选的比特率、vad、质量等。如果 fmtp 行不存在，则 FreeSWITCH 将使用默认设置配置编解码器。

除非 A 腿已经提供了一个 fmtp 并且正在进行呼叫转接，否则 FreeSWITCH 目前不提供发起呼叫时的 fmtp。

## 配置

Speex 提供了许多配置选项，以控制默认质量、复杂度、VAD 等。conf/autoload_configs/speex.conf.xml 文件定义了这些选项。详细了解这些选项控制的内容，请参阅 [Speex 手册]（http://www.speex.org/docs/manual/speex-manual.pdf）。

### 示例默认配置

```xml
<!-- Speex配置。有关这些选项的详细描述，请参见Speex编解码器手册。www.speex.org/docs/manual/speex-manual.pdf -->
<configuration name="speex.conf" description="Speex编解码器配置">
  <!-- 默认设置 -->
  <settings name="default">
    <!-- 0-10之间的整数。质量越高，CPU利用率越高 -->
    <param name="quality" value="5"/>
    <!-- 1-10之间的整数。压缩复杂度越高，CPU利用率越高 -->
    <param name="complexity" value="5"/>
    <!-- 启用声学增强 -->
    <param name="enhancement" value="true"/>
    <!-- 启用语音活动检测 -->
    <param name="vad" value="false"/>
    <!-- 启用可变比特率 -->
    <param name="vbr" value="false"/>
    <!-- 0-10之间的浮点数。质量越高，CPU利用率越高 -->
    <param name="vbr-quality" value="4.0"/>
    <!-- 平均比特率。以bps为单位的整数 -->
    <param name="abr" value="0"/>
    <!-- 启用不连续传输 -->
    <param name="dtx" value="false"/>
    <!-- 启用预处理器 -->
    <param name="preproc" value="false"/>
    <!-- 启用预处理器语音活动检测 -->
    <param name="pp-vad" value="false"/>
    <!-- 启用预处理器自动增益控制 -->
    <param name="pp-agc" value="false"/>
    <!-- AGC级别 -->
    <param name="pp-agc-level" value="8000.0"/>
    <!-- 启用预处理器降噪 -->
    <param name="pp-denoise" value="false"/>
    <!-- 启用预处理器去混响 -->
    <param name="pp-dereverb" value="false"/>
  </settings>
</configuration>


```

## 参考资料

* [编解码器](../Codecs-and-Media/index.mdx#about)
* [Speex.org](http://www.speex.org/)