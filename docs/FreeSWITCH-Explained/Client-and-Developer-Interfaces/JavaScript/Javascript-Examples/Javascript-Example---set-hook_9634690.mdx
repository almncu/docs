# JavaScript示例 - 设置hook

演示如何设置hook。

单击此处展开目录

**playFileWithHangupHook.js**

```js
function on_hangup(hup_session, how)
{
    console_log("err", how + " HOOK" +  " name: " + hup_session.name + " cause: " + hup_session.cause + "\n");
    
    // 如果在这里退出，将终止脚本，因此您可以进行清理并完成进程
    exit();
}

// 设置当会话挂断时调用on_hangup函数
session.setHangupHook(on_hangup);

function onPlayFile(s, type, obj, arg)
{
    try {
        if (type == "dtmf") {
            console_log("info", "DTMF digit: " + s.name + " [" + obj.digit + "] len [" + obj.duration + "]\n\n");
            session.execute("phrase", "spell," + obj.digit);
        }
        
    }  catch (e) {
        console_log("err", e + "\n");
    }
    
    return true;
}

session.answer();

while(session.ready()) {
    session.streamFile("/ram/swimp.raw", onPlayFile);
}
```

# Title

[To_be_replace_1]





# Introduction

[To_be_replace_2]





# Section 1

## Subsection 1.1

[To_be_replace_3]





# Section 2

## Subsection 2.1

[To_be_replace_4]





# Conclusion

[To_be_replace_5]