# Confluence Wiki标准和准则

## 关于

文档团队：在编辑Confluence wiki页面时，请遵守这些标准和准则，以保持一致的用户体验。

复制页面内容，不包括由wiki生成的目录，直接粘贴到基于FS模板的新Confluence页面中。

然后，在由[Belaid Areski](https://freeswitch.org/confluence/display/~areski)创建的[Move Tracker spreadsheet](./Move-Tracker_3375535.mdx#about)上更新页面的记录。如果您只是移动了页面，则选择“已移动”。如果您现在拥有该页面并会修正链接、语法和事实错误，则选择“编辑”。如果该页面不需要进一步编辑，则选择“完成”。

这将向文档团队的其他成员指示谁在编辑页面，并指明如果您希望更新页面时应联系的人。请注意，一些旧的wiki页面将不会被移动，因为它们已经过时或不再适用于当前的FreeSWITCH版本；这些页面标记为“已删除”，其中有相当多的页面。指向旧wiki上最终页面的重定向链接可以标记为“重复”，因为该电子表格是由一个脚本构建的，该脚本不区分实时页面和重定向链接。

xxx

点击此处展开目录

* [结构](#-freeswitch--confluence-wiki-standards-and-guidelines-)
* [一级标题](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
   * [二级标题](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
   * [另一个二级标题](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
      * [三级标题](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
         * [另一个三级标题](#-freeswitch--confluence-wiki-standards-and-guidelines-)
* [另一个一级标题](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
   * [BNF格式](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
   * [命令格式](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
   * [别名](#-freeswitch--confluence-wiki-standards-and-guidelines-)
* [路径](#-freeswitch--confluence-wiki-standards-and-guidelines-)
* [样式](#-freeswitch--confluence-wiki-standards-and-guidelines-)
* [这是页面中顶级标题的一级标题](#-this-is-heading-1-for-top-level-headings-throughout-the-page)  
   * [这是作为标题1下的子部分的标题2](#-this-is-heading-2-as-a-sub-section-under-heading-1)  
      * [这是作为标题2下的子部分的标题3](#-this-is-heading-2-as-a-sub-section-under-heading-1)  
   * [快捷方式](#-freeswitch--confluence-wiki-standards-and-guidelines-)
* [一级标题格式](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
   * [二级标题格式](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
   * [插图标注映射](#callout-graphic-annotation-mapping)  
      * [代码块](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
         * [提示块](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
         * [信息块](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
         * [注意块](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
         * [警告块](#-freeswitch--confluence-wiki-standards-and-guidelines-)
* [Confluence YouTube教程](#confluence-youtube-tutorial)
* [](#-freeswitch--confluence-wiki-standards-and-guidelines-)
* [UML 图表](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
   * [活动图](#-freeswitch--confluence-wiki-standards-and-guidelines-)  
   * [序列图](#-freeswitch--confluence-wiki-standards-and-guidelines-)
* [标签](#-freeswitch--confluence-wiki-standards-and-guidelines-)
* [提示和技巧](#-freeswitch--confluence-wiki-standards-and-guidelines-)
* [待办事项](#-freeswitch--confluence-wiki-standards-and-guidelines-)

## 结构

创建新页面时，请使用“**FS模板**”，其中包含了所有宏，其中包含了所有已准备就绪的格式的目录。

还有一个宏 `{ft}`，它会自动将FreeSWITCH目录插入到您在页面上输入宏的位置上。

每个页面都应以名为“关于”的标题作为起始，接着是一个简短的叙述来解释页面的主题。

接下来，如果页面足够长，需要一个目录，插入`{`FS ToC`}`宏，它包含一个扩展宏，其中包含一个面板宏和一个目录宏。(FS ToC宏有时会有问题报告错误，然后在之后会正常工作。) 不要复制旧维基中的目录。

之后是与解释页面主题相关的命令、变量、叙述、图表、表格和代码示例等内容。

不要忘记为页面添加标签。除了FreeSWITCH中使用的专有术语（如“变量”、“模块”等）以外，其他一切都使用复数形式。例外情况包括“dialplan”和“directory”，因为这些专有名称在FS内部使用。

**典型的Confluence页面结构**

## 关于

这是关于的文本。

目录宏在此处插入（参见快捷方式）

## 标题 1

第一个重点段落。

### 标题 2

标题 2下的文本

### 另一个标题 2

下一个标题 2下的文本

#### 标题 3

文本

#### 另一个标题 3

文本

## 另一个标题 1

第二个重点段落。

（不要忘记从现有列表中为页面添加适当的标签。）

### BNF 格式

命令使用下表中概述的巴科斯范式进行表示。

| |             |                           |
| ------------ | ------------------------- |
| 文字字面量   | 字面上的参数               |
| &lt;变量>    | 变量参数                   |
| \[可选的\]   | 可选参数                   |
| \|           | 或符号                     |
| &            | 与符号                     |
| \*           | 通配符字符                 |
| ...          | 重复符号                   |
| ?            | 单个字符通配符             |
| (分组)       | 优先级覆盖                 |

### 命令格式

命令名称

简要描述命令。

用法，使用预格式化文本（快捷键=Ctrl+7），以"Usage:"字符串开头。

列出参数及其含义，每行一个。

附注，警告，额外的解释，如有必要。

**命令“alias”的示例**

### alias

用于简化常用命令的输入。

用法：alias add | stickyadd &lt;别名> &lt;命令> | del &lt;别名> | *

add - 添加别名  
stickyadd - 添加一个持久存在的别名  
&lt;别名> - 用户自定义的新命令名称  
&lt;命令> - 原始命令名称

示例：

alias add reloadall reloadacl reloadxml  
alias add unreg sofia profile internal flush_inbound_reg  
alias stickyadd reloadall reloadacl reloadxml  
alias del reloadall

只在控制台中有效，不适用于fs_cli。

## 路径

文档中的**conf/**代表FreeSWITCH™父配置目录的通用位置。Linux软件包将配置文件放在`/etc/freeswitch`目录下，而从源代码进行编译通常将其放在`/usr/local/freeswitch/conf`目录树下。Windows使用不同的位置。如有可能，请勿使用硬编码的配置文件路径。

## 样式化

Confluence 通过仅在左上角的样式列表中提供样式，而不是随机标记，标准化了页面的外观。无论从MediaWiki网站复制过来的标题级别如何，请使用以下惯例来保持Confluence页面的一致性：

## 这是页面中顶级标题的 Heading 1

### 这是作为 Heading 1 子节的 Heading 2

#### 这是作为 Heading 2 子节的 Heading 3

...依此类推。这些不仅在视觉上为文本提供样式，还为视力受损的人士的屏幕阅读器提供了语义提示。{fs ToC宏仅包括 h1 到 h3，以便在大页面上保持可管理性。

请不要除非适用，否则使用粗体和斜体。让样式表发挥其作用：

1. 首先粘贴或键入新文本
2. 样式化文本（请参阅快捷键）

随意的文本样式会绕过这些有用的目标，此外还可能过度使用和削弱强调效果。使用提示、信息、注意和警告宏框来替代其维基等效项来设置文本。

可以使用 `单行等宽样式` 工具栏按钮上的大写 A 字母和小标上的小写字母a来标记内联出现的命令和日志输出，以明确一句话。据我所知，这种样式没有键盘快捷键。

### 快捷键

如果你想保持手指在键盘上输入，就不需要使用鼠标和菜单。

| 输入这个   | 显示这个                                |
| ---------- | ------------------------------------------ |
| h1.&lt;空格> | 一级标题格式                           |
| h2.&lt;空格> | 二级标题格式                           |
| {code      | FS 代码块预格式化                |
| {fs        | FreeSWITCH™                                |
| {ft        | FS 目录标题包预格式化 |
| {tip       | 带有绿色勾号的面板       |
| {info      | 带有蓝色圆圈i的面板   |
| {note      | 带有黄色三角形感叹号的面板       |

编辑

在 Confluence 编辑器中，剪切一个文本块或在具有特殊格式的行的开头键入退格时，要非常小心。此操作会删除隐藏的格式化，将当前行还原为标准段落格式（至少在 Firefox 中是如此）。使用 Ctrl-Z 撤消，然后小心地再试一次。

### Callout 图形注释映射

Confluence 提供了插入包含文本和图形的 div 盒子的宏，并用与 MediaWiki 类似的图标进行突出显示。

#### 代码块

要显示多行代码，请使用 Confluence 的 'code' 宏。用于封装 XML、HTML、C、bash 脚本和其他最适合使用预格式化等宽字体样式显示的代码块。代码块里面的内容会自动使用预格式化样式进行排版。我将系统默认设置为突出显示 XML 语法并使用 Emacs 主题，所以您可以保留默认设置（空白），除非有一个很好的原因选择不同的语法高亮。

根据是Bash脚本还是源代码，选择适当的语言，输入一个简短的标题；如果代码有多行，可以勾选“折叠”框，以免不必要地占用页面空间。在许多情况下，语法高亮会降低可读性，所以请将其保持默认状态，即不进行语法高亮。请根据自己的判断来决定。

MediaWiki 代码和图标：

{{keyboard|content=代码块。}}

![](https://wiki.freeswitch.org/images/thumb/a/a9/Keyboard.png/64px-Keyboard.png)

**代码块**

```xml
菜单：插入 > 其他宏 > 代码块
键盘快捷方式：{code
```

#### 提示块

突出提示或额外信息，引起读者特别注意的消息。

菜单：插入 > 其他宏 > 格式 > 提示

键盘快捷方式：{tip

#### 信息块

提供链接和指向有关主题的其他信息的消息。

MediaWiki 代码和图标：

{{info|content=信息文本。}}

![](https://wiki.freeswitch.org/images/thumb/b/b3/Info.png/64px-Info.png)

  
菜单：插入 > 其他宏 > 格式 > 信息

键盘快捷方式：{info

#### 注意块

突出有关主题的重要信息的消息。

MediaWiki 代码和图标：

{{warning|content=警告文本。}}

![](https://wiki.freeswitch.org/images/thumb/c/cb/Warning.png/64px-Warning.png)

菜单：插入 > 其他宏 > 格式 > 注意

键盘快捷方式：{note

#### 警告块

强调对可能导致数据丢失、损坏或欺诈的关键信息的消息。

MediaWiki 代码和图标：

{{error|content=警告文本。}}

![](https://wiki.freeswitch.org/images/thumb/4/49/Error.png/64px-Error.png)

菜单：插入 > 其他宏 > 格式 > 警告

键盘快捷方式：{warn

当有特定命令的警告时，总是在代码块之前添加警告，以引起读者的注意。

x

## Confluence YouTube 教程

## 

## UML 图表

### 活动图

已安装 PlantUML 插件，可将文本源渲染为 UML 活动图。这些图表可用于说明呼叫流程。从作者的网站上获取[活动图帮助](http://plantuml.com/activity2.html)。

![](/download/temp/plantuml10111442917974332311.png) 

### 时序图

该插件还支持时序图，用于说明 SIP 消息流。从作者的网站上获取[时序图帮助](http://plantuml.com/sequence.html)。

![](/download/temp/plantuml12557049914813650798.png)

```

@startuml
== 初始化 ==
license -> FS: INVISITATION
FS -> Alice: 100 Trying
FS -> Bob: INVITE
Bob -> FS: 180 Ringing
FS -> Alice: 180 Ringing
Bob -> FS: 200 OK
FS -> Alice: 200 OK
Alice -> Bob: ACK
== REPETITION ==
Alice -[#blue]> Bob: RTP media stream
Bob -[#blue]> Alice: RTP media stream
FS -> Alice: Update SDP
FS -> Bob: Update SDP
== TERMINATION ==
Bob -> Alice: BYE
Alice -> Bob: 200 OK
@enduml

```

## 标签

标签将相关页面联系在一起。如果您能找到已存在的标签，请不要创建新的标签。

在任何 Confluence 页面上，编辑器可以键入 L（字母 "ELL"）以弹出标签对话框。键入几个字符将启动对现有标签的增量搜索。

复数标签表示一个组，并且是首选的；例如 "操作系统"，"客户端"，"开发人员" 等。

1. A-B  
    * [api](/confluence/label/FREESWITCH/api)  
    * [applications](/confluence/label/FREESWITCH/applications)  
    * [apps](/confluence/label/FREESWITCH/apps)  
    * [arm](/confluence/label/FREESWITCH/arm)  
    * [asr](/confluence/label/FREESWITCH/asr)  
    * [beginners](/confluence/label/FREESWITCH/beginners)  
    * [bsd](/confluence/label/FREESWITCH/bsd)  
    * [bugs](/confluence/label/FREESWITCH/bugs)  
    * [building](/confluence/label/FREESWITCH/building)

2. C  
    * [call-control](/confluence/label/FREESWITCH/call-control)  
    * [cdr](/confluence/label/FREESWITCH/cdr)  
    * [centos](/confluence/label/FREESWITCH/centos)  
    * [certificate](/confluence/label/FREESWITCH/certificate)  
    * [changelog](/confluence/label/FREESWITCH/changelog)  
    * [channel_variable](/confluence/label/FREESWITCH/channel_variable)  
    * [cli](/confluence/label/FREESWITCH/cli)  
    * [clients](/confluence/label/FREESWITCH/clients)  
    * [clusters](/confluence/label/FREESWITCH/clusters)  
    * [codecs](/confluence/label/FREESWITCH/codecs)  
    * [community](/confluence/label/FREESWITCH/community)  
    * [compiling](/confluence/label/FREESWITCH/compiling)  
    * [conference](/confluence/label/FREESWITCH/conference)  
    * [conferencing](/confluence/label/FREESWITCH/conferencing)  
    * [configuration](/confluence/label/FREESWITCH/configuration)  
    * [contributed](/confluence/label/FREESWITCH/contributed)  
    * [core_dump](/confluence/label/FREESWITCH/core_dump)

3. D  
    * [databases](/confluence/label/FREESWITCH/databases)  
    * [debian](/confluence/label/FREESWITCH/debian)  
    * [debug](/confluence/label/FREESWITCH/debug)  
    * [debugging](/confluence/label/FREESWITCH/debugging)  
    * [delete](/confluence/label/FREESWITCH/delete)  
    * [demo](/confluence/label/FREESWITCH/demo)  
    * [dependencies](/confluence/label/FREESWITCH/dependencies)  
    * [developers](/confluence/label/FREESWITCH/developers)  
    * [dialplan](/confluence/label/FREESWITCH/dialplan)  
    * [dinstar](/confluence/label/FREESWITCH/dinstar)  
    * [directory](/confluence/label/FREESWITCH/directory)  
    * [docs-team](/confluence/label/FREESWITCH/docs-team)  
    * [dptools](/confluence/label/FREESWITCH/dptools)  
    * [dtmf](/confluence/label/FREESWITCH/dtmf)

4. E-F  
    * [encryption](/confluence/label/FREESWITCH/encryption)  
    * [endpoints](/confluence/label/FREESWITCH/endpoints)  
    * [erlang](/confluence/label/FREESWITCH/erlang)  
    * [esl](/confluence/label/FREESWITCH/esl)  
    * [events](/confluence/label/FREESWITCH/events)  
    * [examples](/confluence/label/FREESWITCH/examples)  
    * [fax](/confluence/label/FREESWITCH/fax)  
    * [featured](/confluence/label/FREESWITCH/featured)  
    * [file_formats](/confluence/label/FREESWITCH/file_formats)  
    * [fpt](/confluence/label/FREESWITCH/fpt)  
    * [freebsd](/confluence/label/FREESWITCH/freebsd)

5. G-H  
    * [gateways](/confluence/label/FREESWITCH/gateways)  
    *

## 提示和建议

1. FreeSWITCH™。您不必每次都使用商标符号。它在顶层页面的每个实例中都会出现，希望这可以让您明白这一点。如果您在新页面的“关于”部分使用一次，那应该就足够了。在很多情况下，旧的维基使用缩写FS来代表FreeSWITCH，只要能清楚表达意思就可以接受。只要确保它不能与“文件服务器”混淆。
2. 有时在编辑页面（在Firefox中）时，光标焦点会自动移动到页面的顶部或底部，没有明显原因。这非常令人恼火，尤其是在编辑大型页面时更是如此。虽然Atlassian标榜Confluence是一个“可靠的编辑器”，但它有这样和其他一些怪癖，所以在编辑文本时要小心。它有时会做出您意想不到的事情。
3. 当Confluence在“最近更新的页面”中显示出旧的条目时，管理员需要清除缓存并检查内容索引管理页面。

## 待办事项

* 将剩余的页面从MediaWiki复制到Confluence。
* 创建一个参考/示例页面，其中包含所有页面格式元素。
* 找到一种方式，使得在编辑界面中，“通知关注者”默认为取消选中状态。答案：复选框会记住其状态，所以清除它并忘记它。
* 查看是否可以将目录列表样式默认设置为“无”，因为带符号的目录看起来不好看。
* 将默认目录标题缩进减小到更好看一些的值，比如12px（或更好的是1ex）。
* 将目录模板更改为像MediaWiki一样进行阴影和边框处理，以便更加突出。

### 附件：

![](/images/icons/bullet_blue.gif) [index.png](/attachments/1049056/1146891.png) (image/png)  
![](/images/icons/bullet_blue.gif) [info.png](/attachments/1049056/1146892.png) (image/png)  
![](/images/icons/bullet_blue.gif) [warning.png](/attachments/1049056/1146893.png) (image/png)  
![](/images/icons/bullet_blue.gif) [ToC-Readability.png](/attachments/1049056/4227078.png) (image/png)  
![](/images/icons/bullet_blue.gif) [ToC-Readability.png](/attachments/1049056/4227079.png) (image/png)  
![](/images/icons/bullet_blue.gif) [ToC-Readability.png](/attachments/1049056/4227077.png)  

### 评论：

| 为指南添加一些代码片段的规则怎么样？到目前为止，我遇到了3个问题：没有使用代码宏，导致代码显示不美观；代码片段之间的缩进不一致，有的是2个空格，有的是3个空格，还有的是4个空格。我建议使用4个空格来缩进。代码中的注释和变量名应该使用英文。之前我翻译过一个西班牙语的代码示例，显然这对每个人来说都不合适。 ![](/images/icons/contenttypes/comment_16.png) 由 areski 于 2014年6月12日12:33 发表                                                                           |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 标题缩进是1个ex，这看起来有点少了！[](/images/icons/contenttypes/comment_16.png) 由 areski 于2014年6月12日12:46 发表                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 1个ex实际上是很少了。我之所以选择这个值是为了响应一个评论，该评论认为默认的缩进太多了。如果读者能够明显地看出缩进，那就是我所希望的。不幸的是，每个目录宏都必须手动从默认值更改，所以如果要更改最好现在开始，以免有很多页面的缩进值不符合要求。也许可以更改默认值，但这必须由SwK或其他超级管理员在Confluence文件系统中进行。![](/images/icons/contenttypes/comment_16.png) 由 boteman 于2014年6月12日12:57 发表 |
| 我非常确信，使用当前的目录，我们正在失去可读性，尤其是与以前的wiki方法相比较，在这里进行比较:![](/attachments/1049056/4227077.png)请在这里找到一个使用数字列表和2ex缩进的目录 -> [开始使用Confluence文档](/confluence/pages/createpage.action?spaceKey=FREESWITCH&title=Get+Started+with+Confluence+Docs) ![](/images/icons/contenttypes/comment_16.png) 由 areski 于2014年6月19日14:30 发表                                                                       |
| 好的，我修改了{ft宏，添加了"outline"参数，这是Confluence枚举目录条目的方法。当我遇到旧的目录定义页面时，我将删除它，并使用{ft宏进行替换。![](/images/icons/contenttypes/comment_16.png) 由 boteman 于2014年6月23日04:13 发表                                                                                                                                                                                                                                                          |

## Markdown Sample

这是一个用于翻译的示例Markdown文件。

### 标题

这是一个二级标题

#### 子标题

这是一个三级子标题

### 列表

- 列表项1
- 列表项2
- 列表项3

### 引用

> 这是一个引用文本块

### 代码块

```python
def hello_world():
    print("Hello, World!")
```

### 链接

[Google](https://www.google.com/)

### 图片

![logo](https://example.com/logo.png)